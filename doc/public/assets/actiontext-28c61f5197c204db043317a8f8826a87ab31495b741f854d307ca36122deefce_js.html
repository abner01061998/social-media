<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>actiontext-28c61f5197c204db043317a8f8826a87ab31495b741f854d307ca36122deefce.js - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
  var index_rel_prefix = "../../";
</script>

<script src="../../js/navigation.js" defer></script>
<script src="../../js/search.js" defer></script>
<script src="../../js/search_index.js" defer></script>
<script src="../../js/searcher.js" defer></script>
<script src="../../js/darkfish.js" defer></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">


<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="project-metadata">
    
<div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
    <li><a href="../../Gemfile.html">Gemfile</a>
    <li><a href="../../Gemfile_lock.html">Gemfile.lock</a>
    <li><a href="../../README_md.html">README</a>
    <li><a href="../../Rakefile.html">Rakefile</a>
    <li><a href="../../app/assets/config/manifest_js.html">manifest.js</a>
    <li><a href="../../app/assets/stylesheets/application_scss.html">application.scss</a>
    <li><a href="../../app/assets/stylesheets/custom_css.html">custom.css</a>
    <li><a href="../../app/javascript/application_js.html">application.js</a>
    <li><a href="../../app/javascript/controllers/application_js.html">application.js</a>
    <li><a href="../../app/javascript/controllers/hello_controller_js.html">hello_controller.js</a>
    <li><a href="../../app/javascript/controllers/index_js.html">index.js</a>
    <li><a href="../../bin/bundle_cmd.html">bundle.cmd</a>
    <li><a href="../../config_ru.html">config.ru</a>
    <li><a href="../../config/credentials_yml_enc.html">credentials.yml.enc</a>
    <li><a href="../../config/master_key.html">master.key</a>
    <li><a href="../../db/production_sqlite3.html">production.sqlite3</a>
    <li><a href="../../log/development_log.html">development.log</a>
    <li><a href="../../log/production_log.html">production.log</a>
    <li><a href="../../public/404_html.html">404.html</a>
    <li><a href="../../public/422_html.html">422.html</a>
    <li><a href="../../public/500_html.html">500.html</a>
    <li><a href="../../public/apple-touch-icon-precomposed_png.html">apple-touch-icon-precomposed.png</a>
    <li><a href="../../public/apple-touch-icon_png.html">apple-touch-icon.png</a>
    <li><a href="../../public/assets/actioncable-5433453f9b6619a9de91aaab2d7fc7ff183e5260c0107cbc9a1aa0c838d9a74e_js.html">actioncable-5433453f9b6619a9de91aaab2d7fc7ff183e5260c0107cbc9a1aa0c838d9a74e.js</a>
    <li><a href="../../public/assets/actioncable_esm-e01089c3ec4fe7817fa9abcad06cab6bdc387f95f0ca6aab4bf7ba7537f70690_js.html">actioncable.esm-e01089c3ec4fe7817fa9abcad06cab6bdc387f95f0ca6aab4bf7ba7537f70690.js</a>
    <li><a href="../../public/assets/actiontext-28c61f5197c204db043317a8f8826a87ab31495b741f854d307ca36122deefce_js.html">actiontext-28c61f5197c204db043317a8f8826a87ab31495b741f854d307ca36122deefce.js</a>
    <li><a href="../../public/assets/activestorage-3ab61e47dd4ee2d79db525ade1dca2ede0ea2b7371fe587e408ee37b7ade265d_js.html">activestorage-3ab61e47dd4ee2d79db525ade1dca2ede0ea2b7371fe587e408ee37b7ade265d.js</a>
    <li><a href="../../public/assets/activestorage_esm-01f58a45d77495cdfbdfcc872902a430426c4391634ec9c3da5f69fbf8418492_js.html">activestorage.esm-01f58a45d77495cdfbdfcc872902a430426c4391634ec9c3da5f69fbf8418492.js</a>
    <li><a href="../../public/assets/application-32d4b75e744a8a8e755359e6017482014dee13b0c2f0861d571e55531d39a79d_css.html">application-32d4b75e744a8a8e755359e6017482014dee13b0c2f0861d571e55531d39a79d.css</a>
    <li><a href="../../public/assets/application-3e73deab22b3cbf32eae8a405cc3f28cfe3ab81a37fecca6ddbbe46c75af5b0e_css.html">application-3e73deab22b3cbf32eae8a405cc3f28cfe3ab81a37fecca6ddbbe46c75af5b0e.css</a>
    <li><a href="../../public/assets/application-4668a63fc7682ef88af586a54008d0c129dc516b342577afb0de28e081796840_css.html">application-4668a63fc7682ef88af586a54008d0c129dc516b342577afb0de28e081796840.css</a>
    <li><a href="../../public/assets/application-7ac6076e7d9cab030797f1bfe2cf764861a60dc215f623dde8cb933ae0bf10dc_js.html">application-7ac6076e7d9cab030797f1bfe2cf764861a60dc215f623dde8cb933ae0bf10dc.js</a>
    <li><a href="../../public/assets/application-a44e181b486d978d63932a4db09338ae502d90e10c0bdd395aa839123aeea2ec_css.html">application-a44e181b486d978d63932a4db09338ae502d90e10c0bdd395aa839123aeea2ec.css</a>
    <li><a href="../../public/assets/application-ac2e01aa9a494aeeba9e1c95a30a26e3dd5b5ac439d25b67aa38832295e26c3d_css.html">application-ac2e01aa9a494aeeba9e1c95a30a26e3dd5b5ac439d25b67aa38832295e26c3d.css</a>
    <li><a href="../../public/assets/application-dc2d2d6cd177033c4b2946f0fdc563dc111e103bced6042c2b7649f314306f58_css.html">application-dc2d2d6cd177033c4b2946f0fdc563dc111e103bced6042c2b7649f314306f58.css</a>
    <li><a href="../../public/assets/bootstrap_min-20a034247d4d545a7a2d49d62ee00c40f53f825562ed9d6c9af1ad42383e67f6_js.html">bootstrap.min-20a034247d4d545a7a2d49d62ee00c40f53f825562ed9d6c9af1ad42383e67f6.js</a>
    <li><a href="../../public/assets/controllers/application-368d98631bccbf2349e0d4f8269afb3fe9625118341966de054759d96ea86c7e_js.html">application-368d98631bccbf2349e0d4f8269afb3fe9625118341966de054759d96ea86c7e.js</a>
    <li><a href="../../public/assets/controllers/hello_controller-549135e8e7c683a538c3d6d517339ba470fcfb79d62f738a0a089ba41851a554_js.html">hello_controller-549135e8e7c683a538c3d6d517339ba470fcfb79d62f738a0a089ba41851a554.js</a>
    <li><a href="../../public/assets/controllers/index-2db729dddcc5b979110e98de4b6720f83f91a123172e87281d5a58410fc43806_js.html">index-2db729dddcc5b979110e98de4b6720f83f91a123172e87281d5a58410fc43806.js</a>
    <li><a href="../../public/assets/custom-77945ec94022f825cfe7d6166e97092d87ca4f55627c8062b56cfb9f1a35f205_css.html">custom-77945ec94022f825cfe7d6166e97092d87ca4f55627c8062b56cfb9f1a35f205.css</a>
    <li><a href="../../public/assets/custom-7eba9728e51d5c26d8d1cf50340b4b3ad9251d8a5f0142ef57211377bd50fcfc_css.html">custom-7eba9728e51d5c26d8d1cf50340b4b3ad9251d8a5f0142ef57211377bd50fcfc.css</a>
    <li><a href="../../public/assets/custom-de99a0f588d04e64f8aa62da913f7225b090eb13fbfe74a7315f1715cdefec1d_css.html">custom-de99a0f588d04e64f8aa62da913f7225b090eb13fbfe74a7315f1715cdefec1d.css</a>
    <li><a href="../../public/assets/custom-e30bda1bcb7eaa86b4f7970e250dadbfd4aa17f32943e7e25ef353bd822fd884_css.html">custom-e30bda1bcb7eaa86b4f7970e250dadbfd4aa17f32943e7e25ef353bd822fd884.css</a>
    <li><a href="../../public/assets/es-module-shims-16719834c9bbcdd75f1f99da713bd0c89de488be94d4c5df594511f39cffe7c1_js.html">es-module-shims-16719834c9bbcdd75f1f99da713bd0c89de488be94d4c5df594511f39cffe7c1.js</a>
    <li><a href="../../public/assets/es-module-shims_js-32db422c5db541b7129a2ce936aed905edc2cd481748f8d67ffe84e28313158a_map.html">es-module-shims.js-32db422c5db541b7129a2ce936aed905edc2cd481748f8d67ffe84e28313158a.map</a>
    <li><a href="../../public/assets/es-module-shims_min-d89e73202ec09dede55fb74115af9c5f9f2bb965433de1c2446e1faa6dac2470_js.html">es-module-shims.min-d89e73202ec09dede55fb74115af9c5f9f2bb965433de1c2446e1faa6dac2470.js</a>
    <li><a href="../../public/assets/manifest-b84bfa46a33d7f0dc4d2e7b8889486c9a957a5e40713d58f54be71b66954a1ff_js.html">manifest-b84bfa46a33d7f0dc4d2e7b8889486c9a957a5e40713d58f54be71b66954a1ff.js</a>
    <li><a href="../../public/assets/popper-15792033e209365e7b75c100dae2b69cba31b26b18b289383d22eb67639aad75_js.html">popper-15792033e209365e7b75c100dae2b69cba31b26b18b289383d22eb67639aad75.js</a>
    <li><a href="../../public/assets/stimulus-2e76632599c700da6e187ce7b15eea7c0eace0e09f25d19e55e3b1f7c515397c_js.html">stimulus-2e76632599c700da6e187ce7b15eea7c0eace0e09f25d19e55e3b1f7c515397c.js</a>
    <li><a href="../../public/assets/stimulus-autoloader-c584942b568ba74879da31c7c3d51366737bacaf6fbae659383c0a5653685693_js.html">stimulus-autoloader-c584942b568ba74879da31c7c3d51366737bacaf6fbae659383c0a5653685693.js</a>
    <li><a href="../../public/assets/stimulus-importmap-autoloader-db2076c783bf2dbee1226e2add52fef290b5d31b5bcd1edd999ac8a6dd31c44a_js.html">stimulus-importmap-autoloader-db2076c783bf2dbee1226e2add52fef290b5d31b5bcd1edd999ac8a6dd31c44a.js</a>
    <li><a href="../../public/assets/stimulus-loading-1fc59770fb1654500044afd3f5f6d7d00800e5be36746d55b94a2963a7a228aa_js.html">stimulus-loading-1fc59770fb1654500044afd3f5f6d7d00800e5be36746d55b94a2963a7a228aa.js</a>
    <li><a href="../../public/assets/stimulus_min-b8a9738499c7a8362910cd545375417370d72a9776fb4e766df7671484e2beb7_js.html">stimulus.min-b8a9738499c7a8362910cd545375417370d72a9776fb4e766df7671484e2beb7.js</a>
    <li><a href="../../public/assets/stimulus_min_js-8d1a076cbda7e5ed0992e208db54c62a8de8b1f9694828e1a601fbccd9291649_map.html">stimulus.min.js-8d1a076cbda7e5ed0992e208db54c62a8de8b1f9694828e1a601fbccd9291649.map</a>
    <li><a href="../../public/assets/trix-1563ff9c10f74e143b3ded40a8458497eaf2f87a648a5cbbfebdb7dec3447a5e_js.html">trix-1563ff9c10f74e143b3ded40a8458497eaf2f87a648a5cbbfebdb7dec3447a5e.js</a>
    <li><a href="../../public/assets/trix-fe178d6f8c056d8e63aecb6557bc65676897f43e4aee3e68584437841a99fc23_css.html">trix-fe178d6f8c056d8e63aecb6557bc65676897f43e4aee3e68584437841a99fc23.css</a>
    <li><a href="../../public/assets/turbo-118a59d5569d8a8b343ee3cd7f2c39b6b5fa5f236368b332e2db7bdad59d1ca9_js.html">turbo-118a59d5569d8a8b343ee3cd7f2c39b6b5fa5f236368b332e2db7bdad59d1ca9.js</a>
    <li><a href="../../public/assets/turbo_min-3b666ce240bde65e66d795553a062443a3b139e38646fe31740d354a41653fcc_js.html">turbo.min-3b666ce240bde65e66d795553a062443a3b139e38646fe31740d354a41653fcc.js</a>
    <li><a href="../../public/assets/turbo_min_js-c3141c67d707e81f67affd6a77f1657e298d5cb8aac6628e892669905b33786e_map.html">turbo.min.js-c3141c67d707e81f67affd6a77f1657e298d5cb8aac6628e892669905b33786e.map</a>
    <li><a href="../../public/favicon_ico.html">favicon.ico</a>
    <li><a href="../../public/robots_txt.html">robots</a>
    <li><a href="../../tmp/development_secret_txt.html">development_secret</a>
    <li><a href="../../tmp/pids/server_pid.html">server.pid</a>
    <li><a href="../../tmp/restart_txt.html">restart</a>
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page public/assets/actiontext-28c61f5197c204db043317a8f8826a87ab31495b741f854d307ca36122deefce.js">

<p>var commonjsGlobal = typeof globalThis !== ‘undefined’ ? globalThis : typeof window !== ‘undefined’ ? window : typeof global !== ‘undefined’ ? global : typeof self !== ‘undefined’ ? self : {};</p>

<p>var activestorage = {exports: {}};</p>

<p>(function (module, exports) { (function(global, factory) {</p>

<pre class="ruby"><span class="ruby-identifier">factory</span>(<span class="ruby-identifier">exports</span>) ;
</pre>

<p>})(commonjsGlobal, (function(exports) {</p>

<pre>var sparkMd5 = {
  exports: {}
};
(function(module, exports) {
  (function(factory) {
    {
      module.exports = factory();
    }
  })((function(undefined$1) {
    var hex_chr = [ &quot;0&quot;, &quot;1&quot;, &quot;2&quot;, &quot;3&quot;, &quot;4&quot;, &quot;5&quot;, &quot;6&quot;, &quot;7&quot;, &quot;8&quot;, &quot;9&quot;, &quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;d&quot;, &quot;e&quot;, &quot;f&quot; ];
    function md5cycle(x, k) {
      var a = x[0], b = x[1], c = x[2], d = x[3];
      a += (b &amp; c | ~b &amp; d) + k[0] - 680876936 | 0;
      a = (a &lt;&lt; 7 | a &gt;&gt;&gt; 25) + b | 0;
      d += (a &amp; b | ~a &amp; c) + k[1] - 389564586 | 0;
      d = (d &lt;&lt; 12 | d &gt;&gt;&gt; 20) + a | 0;
      c += (d &amp; a | ~d &amp; b) + k[2] + 606105819 | 0;
      c = (c &lt;&lt; 17 | c &gt;&gt;&gt; 15) + d | 0;
      b += (c &amp; d | ~c &amp; a) + k[3] - 1044525330 | 0;
      b = (b &lt;&lt; 22 | b &gt;&gt;&gt; 10) + c | 0;
      a += (b &amp; c | ~b &amp; d) + k[4] - 176418897 | 0;
      a = (a &lt;&lt; 7 | a &gt;&gt;&gt; 25) + b | 0;
      d += (a &amp; b | ~a &amp; c) + k[5] + 1200080426 | 0;
      d = (d &lt;&lt; 12 | d &gt;&gt;&gt; 20) + a | 0;
      c += (d &amp; a | ~d &amp; b) + k[6] - 1473231341 | 0;
      c = (c &lt;&lt; 17 | c &gt;&gt;&gt; 15) + d | 0;
      b += (c &amp; d | ~c &amp; a) + k[7] - 45705983 | 0;
      b = (b &lt;&lt; 22 | b &gt;&gt;&gt; 10) + c | 0;
      a += (b &amp; c | ~b &amp; d) + k[8] + 1770035416 | 0;
      a = (a &lt;&lt; 7 | a &gt;&gt;&gt; 25) + b | 0;
      d += (a &amp; b | ~a &amp; c) + k[9] - 1958414417 | 0;
      d = (d &lt;&lt; 12 | d &gt;&gt;&gt; 20) + a | 0;
      c += (d &amp; a | ~d &amp; b) + k[10] - 42063 | 0;
      c = (c &lt;&lt; 17 | c &gt;&gt;&gt; 15) + d | 0;
      b += (c &amp; d | ~c &amp; a) + k[11] - 1990404162 | 0;
      b = (b &lt;&lt; 22 | b &gt;&gt;&gt; 10) + c | 0;
      a += (b &amp; c | ~b &amp; d) + k[12] + 1804603682 | 0;
      a = (a &lt;&lt; 7 | a &gt;&gt;&gt; 25) + b | 0;
      d += (a &amp; b | ~a &amp; c) + k[13] - 40341101 | 0;
      d = (d &lt;&lt; 12 | d &gt;&gt;&gt; 20) + a | 0;
      c += (d &amp; a | ~d &amp; b) + k[14] - 1502002290 | 0;
      c = (c &lt;&lt; 17 | c &gt;&gt;&gt; 15) + d | 0;
      b += (c &amp; d | ~c &amp; a) + k[15] + 1236535329 | 0;
      b = (b &lt;&lt; 22 | b &gt;&gt;&gt; 10) + c | 0;
      a += (b &amp; d | c &amp; ~d) + k[1] - 165796510 | 0;
      a = (a &lt;&lt; 5 | a &gt;&gt;&gt; 27) + b | 0;
      d += (a &amp; c | b &amp; ~c) + k[6] - 1069501632 | 0;
      d = (d &lt;&lt; 9 | d &gt;&gt;&gt; 23) + a | 0;
      c += (d &amp; b | a &amp; ~b) + k[11] + 643717713 | 0;
      c = (c &lt;&lt; 14 | c &gt;&gt;&gt; 18) + d | 0;
      b += (c &amp; a | d &amp; ~a) + k[0] - 373897302 | 0;
      b = (b &lt;&lt; 20 | b &gt;&gt;&gt; 12) + c | 0;
      a += (b &amp; d | c &amp; ~d) + k[5] - 701558691 | 0;
      a = (a &lt;&lt; 5 | a &gt;&gt;&gt; 27) + b | 0;
      d += (a &amp; c | b &amp; ~c) + k[10] + 38016083 | 0;
      d = (d &lt;&lt; 9 | d &gt;&gt;&gt; 23) + a | 0;
      c += (d &amp; b | a &amp; ~b) + k[15] - 660478335 | 0;
      c = (c &lt;&lt; 14 | c &gt;&gt;&gt; 18) + d | 0;
      b += (c &amp; a | d &amp; ~a) + k[4] - 405537848 | 0;
      b = (b &lt;&lt; 20 | b &gt;&gt;&gt; 12) + c | 0;
      a += (b &amp; d | c &amp; ~d) + k[9] + 568446438 | 0;
      a = (a &lt;&lt; 5 | a &gt;&gt;&gt; 27) + b | 0;
      d += (a &amp; c | b &amp; ~c) + k[14] - 1019803690 | 0;
      d = (d &lt;&lt; 9 | d &gt;&gt;&gt; 23) + a | 0;
      c += (d &amp; b | a &amp; ~b) + k[3] - 187363961 | 0;
      c = (c &lt;&lt; 14 | c &gt;&gt;&gt; 18) + d | 0;
      b += (c &amp; a | d &amp; ~a) + k[8] + 1163531501 | 0;
      b = (b &lt;&lt; 20 | b &gt;&gt;&gt; 12) + c | 0;
      a += (b &amp; d | c &amp; ~d) + k[13] - 1444681467 | 0;
      a = (a &lt;&lt; 5 | a &gt;&gt;&gt; 27) + b | 0;
      d += (a &amp; c | b &amp; ~c) + k[2] - 51403784 | 0;
      d = (d &lt;&lt; 9 | d &gt;&gt;&gt; 23) + a | 0;
      c += (d &amp; b | a &amp; ~b) + k[7] + 1735328473 | 0;
      c = (c &lt;&lt; 14 | c &gt;&gt;&gt; 18) + d | 0;
      b += (c &amp; a | d &amp; ~a) + k[12] - 1926607734 | 0;
      b = (b &lt;&lt; 20 | b &gt;&gt;&gt; 12) + c | 0;
      a += (b ^ c ^ d) + k[5] - 378558 | 0;
      a = (a &lt;&lt; 4 | a &gt;&gt;&gt; 28) + b | 0;
      d += (a ^ b ^ c) + k[8] - 2022574463 | 0;
      d = (d &lt;&lt; 11 | d &gt;&gt;&gt; 21) + a | 0;
      c += (d ^ a ^ b) + k[11] + 1839030562 | 0;
      c = (c &lt;&lt; 16 | c &gt;&gt;&gt; 16) + d | 0;
      b += (c ^ d ^ a) + k[14] - 35309556 | 0;
      b = (b &lt;&lt; 23 | b &gt;&gt;&gt; 9) + c | 0;
      a += (b ^ c ^ d) + k[1] - 1530992060 | 0;
      a = (a &lt;&lt; 4 | a &gt;&gt;&gt; 28) + b | 0;
      d += (a ^ b ^ c) + k[4] + 1272893353 | 0;
      d = (d &lt;&lt; 11 | d &gt;&gt;&gt; 21) + a | 0;
      c += (d ^ a ^ b) + k[7] - 155497632 | 0;
      c = (c &lt;&lt; 16 | c &gt;&gt;&gt; 16) + d | 0;
      b += (c ^ d ^ a) + k[10] - 1094730640 | 0;
      b = (b &lt;&lt; 23 | b &gt;&gt;&gt; 9) + c | 0;
      a += (b ^ c ^ d) + k[13] + 681279174 | 0;
      a = (a &lt;&lt; 4 | a &gt;&gt;&gt; 28) + b | 0;
      d += (a ^ b ^ c) + k[0] - 358537222 | 0;
      d = (d &lt;&lt; 11 | d &gt;&gt;&gt; 21) + a | 0;
      c += (d ^ a ^ b) + k[3] - 722521979 | 0;
      c = (c &lt;&lt; 16 | c &gt;&gt;&gt; 16) + d | 0;
      b += (c ^ d ^ a) + k[6] + 76029189 | 0;
      b = (b &lt;&lt; 23 | b &gt;&gt;&gt; 9) + c | 0;
      a += (b ^ c ^ d) + k[9] - 640364487 | 0;
      a = (a &lt;&lt; 4 | a &gt;&gt;&gt; 28) + b | 0;
      d += (a ^ b ^ c) + k[12] - 421815835 | 0;
      d = (d &lt;&lt; 11 | d &gt;&gt;&gt; 21) + a | 0;
      c += (d ^ a ^ b) + k[15] + 530742520 | 0;
      c = (c &lt;&lt; 16 | c &gt;&gt;&gt; 16) + d | 0;
      b += (c ^ d ^ a) + k[2] - 995338651 | 0;
      b = (b &lt;&lt; 23 | b &gt;&gt;&gt; 9) + c | 0;
      a += (c ^ (b | ~d)) + k[0] - 198630844 | 0;
      a = (a &lt;&lt; 6 | a &gt;&gt;&gt; 26) + b | 0;
      d += (b ^ (a | ~c)) + k[7] + 1126891415 | 0;
      d = (d &lt;&lt; 10 | d &gt;&gt;&gt; 22) + a | 0;
      c += (a ^ (d | ~b)) + k[14] - 1416354905 | 0;
      c = (c &lt;&lt; 15 | c &gt;&gt;&gt; 17) + d | 0;
      b += (d ^ (c | ~a)) + k[5] - 57434055 | 0;
      b = (b &lt;&lt; 21 | b &gt;&gt;&gt; 11) + c | 0;
      a += (c ^ (b | ~d)) + k[12] + 1700485571 | 0;
      a = (a &lt;&lt; 6 | a &gt;&gt;&gt; 26) + b | 0;
      d += (b ^ (a | ~c)) + k[3] - 1894986606 | 0;
      d = (d &lt;&lt; 10 | d &gt;&gt;&gt; 22) + a | 0;
      c += (a ^ (d | ~b)) + k[10] - 1051523 | 0;
      c = (c &lt;&lt; 15 | c &gt;&gt;&gt; 17) + d | 0;
      b += (d ^ (c | ~a)) + k[1] - 2054922799 | 0;
      b = (b &lt;&lt; 21 | b &gt;&gt;&gt; 11) + c | 0;
      a += (c ^ (b | ~d)) + k[8] + 1873313359 | 0;
      a = (a &lt;&lt; 6 | a &gt;&gt;&gt; 26) + b | 0;
      d += (b ^ (a | ~c)) + k[15] - 30611744 | 0;
      d = (d &lt;&lt; 10 | d &gt;&gt;&gt; 22) + a | 0;
      c += (a ^ (d | ~b)) + k[6] - 1560198380 | 0;
      c = (c &lt;&lt; 15 | c &gt;&gt;&gt; 17) + d | 0;
      b += (d ^ (c | ~a)) + k[13] + 1309151649 | 0;
      b = (b &lt;&lt; 21 | b &gt;&gt;&gt; 11) + c | 0;
      a += (c ^ (b | ~d)) + k[4] - 145523070 | 0;
      a = (a &lt;&lt; 6 | a &gt;&gt;&gt; 26) + b | 0;
      d += (b ^ (a | ~c)) + k[11] - 1120210379 | 0;
      d = (d &lt;&lt; 10 | d &gt;&gt;&gt; 22) + a | 0;
      c += (a ^ (d | ~b)) + k[2] + 718787259 | 0;
      c = (c &lt;&lt; 15 | c &gt;&gt;&gt; 17) + d | 0;
      b += (d ^ (c | ~a)) + k[9] - 343485551 | 0;
      b = (b &lt;&lt; 21 | b &gt;&gt;&gt; 11) + c | 0;
      x[0] = a + x[0] | 0;
      x[1] = b + x[1] | 0;
      x[2] = c + x[2] | 0;
      x[3] = d + x[3] | 0;
    }
    function md5blk(s) {
      var md5blks = [], i;
      for (i = 0; i &lt; 64; i += 4) {
        md5blks[i &gt;&gt; 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) &lt;&lt; 8) + (s.charCodeAt(i + 2) &lt;&lt; 16) + (s.charCodeAt(i + 3) &lt;&lt; 24);
      }
      return md5blks;
    }
    function md5blk_array(a) {
      var md5blks = [], i;
      for (i = 0; i &lt; 64; i += 4) {
        md5blks[i &gt;&gt; 2] = a[i] + (a[i + 1] &lt;&lt; 8) + (a[i + 2] &lt;&lt; 16) + (a[i + 3] &lt;&lt; 24);
      }
      return md5blks;
    }
    function md51(s) {
      var n = s.length, state = [ 1732584193, -271733879, -1732584194, 271733878 ], i, length, tail, tmp, lo, hi;
      for (i = 64; i &lt;= n; i += 64) {
        md5cycle(state, md5blk(s.substring(i - 64, i)));
      }
      s = s.substring(i - 64);
      length = s.length;
      tail = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ];
      for (i = 0; i &lt; length; i += 1) {
        tail[i &gt;&gt; 2] |= s.charCodeAt(i) &lt;&lt; (i % 4 &lt;&lt; 3);
      }
      tail[i &gt;&gt; 2] |= 128 &lt;&lt; (i % 4 &lt;&lt; 3);
      if (i &gt; 55) {
        md5cycle(state, tail);
        for (i = 0; i &lt; 16; i += 1) {
          tail[i] = 0;
        }
      }
      tmp = n * 8;
      tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);
      lo = parseInt(tmp[2], 16);
      hi = parseInt(tmp[1], 16) || 0;
      tail[14] = lo;
      tail[15] = hi;
      md5cycle(state, tail);
      return state;
    }
    function md51_array(a) {
      var n = a.length, state = [ 1732584193, -271733879, -1732584194, 271733878 ], i, length, tail, tmp, lo, hi;
      for (i = 64; i &lt;= n; i += 64) {
        md5cycle(state, md5blk_array(a.subarray(i - 64, i)));
      }
      a = i - 64 &lt; n ? a.subarray(i - 64) : new Uint8Array(0);
      length = a.length;
      tail = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ];
      for (i = 0; i &lt; length; i += 1) {
        tail[i &gt;&gt; 2] |= a[i] &lt;&lt; (i % 4 &lt;&lt; 3);
      }
      tail[i &gt;&gt; 2] |= 128 &lt;&lt; (i % 4 &lt;&lt; 3);
      if (i &gt; 55) {
        md5cycle(state, tail);
        for (i = 0; i &lt; 16; i += 1) {
          tail[i] = 0;
        }
      }
      tmp = n * 8;
      tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);
      lo = parseInt(tmp[2], 16);
      hi = parseInt(tmp[1], 16) || 0;
      tail[14] = lo;
      tail[15] = hi;
      md5cycle(state, tail);
      return state;
    }
    function rhex(n) {
      var s = &quot;&quot;, j;
      for (j = 0; j &lt; 4; j += 1) {
        s += hex_chr[n &gt;&gt; j * 8 + 4 &amp; 15] + hex_chr[n &gt;&gt; j * 8 &amp; 15];
      }
      return s;
    }
    function hex(x) {
      var i;
      for (i = 0; i &lt; x.length; i += 1) {
        x[i] = rhex(x[i]);
      }
      return x.join(&quot;&quot;);
    }
    if (hex(md51(&quot;hello&quot;)) !== &quot;5d41402abc4b2a76b9719d911017c592&quot;) ;
    if (typeof ArrayBuffer !== &quot;undefined&quot; &amp;&amp; !ArrayBuffer.prototype.slice) {
      (function() {
        function clamp(val, length) {
          val = val | 0 || 0;
          if (val &lt; 0) {
            return Math.max(val + length, 0);
          }
          return Math.min(val, length);
        }
        ArrayBuffer.prototype.slice = function(from, to) {
          var length = this.byteLength, begin = clamp(from, length), end = length, num, target, targetArray, sourceArray;
          if (to !== undefined$1) {
            end = clamp(to, length);
          }
          if (begin &gt; end) {
            return new ArrayBuffer(0);
          }
          num = end - begin;
          target = new ArrayBuffer(num);
          targetArray = new Uint8Array(target);
          sourceArray = new Uint8Array(this, begin, num);
          targetArray.set(sourceArray);
          return target;
        };
      })();
    }
    function toUtf8(str) {
      if (/[\u0080-\uFFFF]/.test(str)) {
        str = unescape(encodeURIComponent(str));
      }
      return str;
    }
    function utf8Str2ArrayBuffer(str, returnUInt8Array) {
      var length = str.length, buff = new ArrayBuffer(length), arr = new Uint8Array(buff), i;
      for (i = 0; i &lt; length; i += 1) {
        arr[i] = str.charCodeAt(i);
      }
      return returnUInt8Array ? arr : buff;
    }
    function arrayBuffer2Utf8Str(buff) {
      return String.fromCharCode.apply(null, new Uint8Array(buff));
    }
    function concatenateArrayBuffers(first, second, returnUInt8Array) {
      var result = new Uint8Array(first.byteLength + second.byteLength);
      result.set(new Uint8Array(first));
      result.set(new Uint8Array(second), first.byteLength);
      return returnUInt8Array ? result : result.buffer;
    }
    function hexToBinaryString(hex) {
      var bytes = [], length = hex.length, x;
      for (x = 0; x &lt; length - 1; x += 2) {
        bytes.push(parseInt(hex.substr(x, 2), 16));
      }
      return String.fromCharCode.apply(String, bytes);
    }
    function SparkMD5() {
      this.reset();
    }
    SparkMD5.prototype.append = function(str) {
      this.appendBinary(toUtf8(str));
      return this;
    };
    SparkMD5.prototype.appendBinary = function(contents) {
      this._buff += contents;
      this._length += contents.length;
      var length = this._buff.length, i;
      for (i = 64; i &lt;= length; i += 64) {
        md5cycle(this._hash, md5blk(this._buff.substring(i - 64, i)));
      }
      this._buff = this._buff.substring(i - 64);
      return this;
    };
    SparkMD5.prototype.end = function(raw) {
      var buff = this._buff, length = buff.length, i, tail = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ], ret;
      for (i = 0; i &lt; length; i += 1) {
        tail[i &gt;&gt; 2] |= buff.charCodeAt(i) &lt;&lt; (i % 4 &lt;&lt; 3);
      }
      this._finish(tail, length);
      ret = hex(this._hash);
      if (raw) {
        ret = hexToBinaryString(ret);
      }
      this.reset();
      return ret;
    };
    SparkMD5.prototype.reset = function() {
      this._buff = &quot;&quot;;
      this._length = 0;
      this._hash = [ 1732584193, -271733879, -1732584194, 271733878 ];
      return this;
    };
    SparkMD5.prototype.getState = function() {
      return {
        buff: this._buff,
        length: this._length,
        hash: this._hash.slice()
      };
    };
    SparkMD5.prototype.setState = function(state) {
      this._buff = state.buff;
      this._length = state.length;
      this._hash = state.hash;
      return this;
    };
    SparkMD5.prototype.destroy = function() {
      delete this._hash;
      delete this._buff;
      delete this._length;
    };
    SparkMD5.prototype._finish = function(tail, length) {
      var i = length, tmp, lo, hi;
      tail[i &gt;&gt; 2] |= 128 &lt;&lt; (i % 4 &lt;&lt; 3);
      if (i &gt; 55) {
        md5cycle(this._hash, tail);
        for (i = 0; i &lt; 16; i += 1) {
          tail[i] = 0;
        }
      }
      tmp = this._length * 8;
      tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);
      lo = parseInt(tmp[2], 16);
      hi = parseInt(tmp[1], 16) || 0;
      tail[14] = lo;
      tail[15] = hi;
      md5cycle(this._hash, tail);
    };
    SparkMD5.hash = function(str, raw) {
      return SparkMD5.hashBinary(toUtf8(str), raw);
    };
    SparkMD5.hashBinary = function(content, raw) {
      var hash = md51(content), ret = hex(hash);
      return raw ? hexToBinaryString(ret) : ret;
    };
    SparkMD5.ArrayBuffer = function() {
      this.reset();
    };
    SparkMD5.ArrayBuffer.prototype.append = function(arr) {
      var buff = concatenateArrayBuffers(this._buff.buffer, arr, true), length = buff.length, i;
      this._length += arr.byteLength;
      for (i = 64; i &lt;= length; i += 64) {
        md5cycle(this._hash, md5blk_array(buff.subarray(i - 64, i)));
      }
      this._buff = i - 64 &lt; length ? new Uint8Array(buff.buffer.slice(i - 64)) : new Uint8Array(0);
      return this;
    };
    SparkMD5.ArrayBuffer.prototype.end = function(raw) {
      var buff = this._buff, length = buff.length, tail = [ 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 ], i, ret;
      for (i = 0; i &lt; length; i += 1) {
        tail[i &gt;&gt; 2] |= buff[i] &lt;&lt; (i % 4 &lt;&lt; 3);
      }
      this._finish(tail, length);
      ret = hex(this._hash);
      if (raw) {
        ret = hexToBinaryString(ret);
      }
      this.reset();
      return ret;
    };
    SparkMD5.ArrayBuffer.prototype.reset = function() {
      this._buff = new Uint8Array(0);
      this._length = 0;
      this._hash = [ 1732584193, -271733879, -1732584194, 271733878 ];
      return this;
    };
    SparkMD5.ArrayBuffer.prototype.getState = function() {
      var state = SparkMD5.prototype.getState.call(this);
      state.buff = arrayBuffer2Utf8Str(state.buff);
      return state;
    };
    SparkMD5.ArrayBuffer.prototype.setState = function(state) {
      state.buff = utf8Str2ArrayBuffer(state.buff, true);
      return SparkMD5.prototype.setState.call(this, state);
    };
    SparkMD5.ArrayBuffer.prototype.destroy = SparkMD5.prototype.destroy;
    SparkMD5.ArrayBuffer.prototype._finish = SparkMD5.prototype._finish;
    SparkMD5.ArrayBuffer.hash = function(arr, raw) {
      var hash = md51_array(new Uint8Array(arr)), ret = hex(hash);
      return raw ? hexToBinaryString(ret) : ret;
    };
    return SparkMD5;
  }));
})(sparkMd5);
var SparkMD5 = sparkMd5.exports;
const fileSlice = File.prototype.slice || File.prototype.mozSlice || File.prototype.webkitSlice;
class FileChecksum {
  static create(file, callback) {
    const instance = new FileChecksum(file);
    instance.create(callback);
  }
  constructor(file) {
    this.file = file;
    this.chunkSize = 2097152;
    this.chunkCount = Math.ceil(this.file.size / this.chunkSize);
    this.chunkIndex = 0;
  }
  create(callback) {
    this.callback = callback;
    this.md5Buffer = new SparkMD5.ArrayBuffer;
    this.fileReader = new FileReader;
    this.fileReader.addEventListener(&quot;load&quot;, (event =&gt; this.fileReaderDidLoad(event)));
    this.fileReader.addEventListener(&quot;error&quot;, (event =&gt; this.fileReaderDidError(event)));
    this.readNextChunk();
  }
  fileReaderDidLoad(event) {
    this.md5Buffer.append(event.target.result);
    if (!this.readNextChunk()) {
      const binaryDigest = this.md5Buffer.end(true);
      const base64digest = btoa(binaryDigest);
      this.callback(null, base64digest);
    }
  }
  fileReaderDidError(event) {
    this.callback(`Error reading ${this.file.name}`);
  }
  readNextChunk() {
    if (this.chunkIndex &lt; this.chunkCount || this.chunkIndex == 0 &amp;&amp; this.chunkCount == 0) {
      const start = this.chunkIndex * this.chunkSize;
      const end = Math.min(start + this.chunkSize, this.file.size);
      const bytes = fileSlice.call(this.file, start, end);
      this.fileReader.readAsArrayBuffer(bytes);
      this.chunkIndex++;
      return true;
    } else {
      return false;
    }
  }
}
function getMetaValue(name) {
  const element = findElement(document.head, `meta[name=&quot;${name}&quot;]`);
  if (element) {
    return element.getAttribute(&quot;content&quot;);
  }
}
function findElements(root, selector) {
  if (typeof root == &quot;string&quot;) {
    selector = root;
    root = document;
  }
  const elements = root.querySelectorAll(selector);
  return toArray(elements);
}
function findElement(root, selector) {
  if (typeof root == &quot;string&quot;) {
    selector = root;
    root = document;
  }
  return root.querySelector(selector);
}
function dispatchEvent(element, type, eventInit = {}) {
  const {disabled: disabled} = element;
  const {bubbles: bubbles, cancelable: cancelable, detail: detail} = eventInit;
  const event = document.createEvent(&quot;Event&quot;);
  event.initEvent(type, bubbles || true, cancelable || true);
  event.detail = detail || {};
  try {
    element.disabled = false;
    element.dispatchEvent(event);
  } finally {
    element.disabled = disabled;
  }
  return event;
}
function toArray(value) {
  if (Array.isArray(value)) {
    return value;
  } else if (Array.from) {
    return Array.from(value);
  } else {
    return [].slice.call(value);
  }
}
class BlobRecord {
  constructor(file, checksum, url) {
    this.file = file;
    this.attributes = {
      filename: file.name,
      content_type: file.type || &quot;application/octet-stream&quot;,
      byte_size: file.size,
      checksum: checksum
    };
    this.xhr = new XMLHttpRequest;
    this.xhr.open(&quot;POST&quot;, url, true);
    this.xhr.responseType = &quot;json&quot;;
    this.xhr.setRequestHeader(&quot;Content-Type&quot;, &quot;application/json&quot;);
    this.xhr.setRequestHeader(&quot;Accept&quot;, &quot;application/json&quot;);
    this.xhr.setRequestHeader(&quot;X-Requested-With&quot;, &quot;XMLHttpRequest&quot;);
    const csrfToken = getMetaValue(&quot;csrf-token&quot;);
    if (csrfToken != undefined) {
      this.xhr.setRequestHeader(&quot;X-CSRF-Token&quot;, csrfToken);
    }
    this.xhr.addEventListener(&quot;load&quot;, (event =&gt; this.requestDidLoad(event)));
    this.xhr.addEventListener(&quot;error&quot;, (event =&gt; this.requestDidError(event)));
  }
  get status() {
    return this.xhr.status;
  }
  get response() {
    const {responseType: responseType, response: response} = this.xhr;
    if (responseType == &quot;json&quot;) {
      return response;
    } else {
      return JSON.parse(response);
    }
  }
  create(callback) {
    this.callback = callback;
    this.xhr.send(JSON.stringify({
      blob: this.attributes
    }));
  }
  requestDidLoad(event) {
    if (this.status &gt;= 200 &amp;&amp; this.status &lt; 300) {
      const {response: response} = this;
      const {direct_upload: direct_upload} = response;
      delete response.direct_upload;
      this.attributes = response;
      this.directUploadData = direct_upload;
      this.callback(null, this.toJSON());
    } else {
      this.requestDidError(event);
    }
  }
  requestDidError(event) {
    this.callback(`Error creating Blob for &quot;${this.file.name}&quot;. Status: ${this.status}`);
  }
  toJSON() {
    const result = {};
    for (const key in this.attributes) {
      result[key] = this.attributes[key];
    }
    return result;
  }
}
class BlobUpload {
  constructor(blob) {
    this.blob = blob;
    this.file = blob.file;
    const {url: url, headers: headers} = blob.directUploadData;
    this.xhr = new XMLHttpRequest;
    this.xhr.open(&quot;PUT&quot;, url, true);
    this.xhr.responseType = &quot;text&quot;;
    for (const key in headers) {
      this.xhr.setRequestHeader(key, headers[key]);
    }
    this.xhr.addEventListener(&quot;load&quot;, (event =&gt; this.requestDidLoad(event)));
    this.xhr.addEventListener(&quot;error&quot;, (event =&gt; this.requestDidError(event)));
  }
  create(callback) {
    this.callback = callback;
    this.xhr.send(this.file.slice());
  }
  requestDidLoad(event) {
    const {status: status, response: response} = this.xhr;
    if (status &gt;= 200 &amp;&amp; status &lt; 300) {
      this.callback(null, response);
    } else {
      this.requestDidError(event);
    }
  }
  requestDidError(event) {
    this.callback(`Error storing &quot;${this.file.name}&quot;. Status: ${this.xhr.status}`);
  }
}
let id = 0;
class DirectUpload {
  constructor(file, url, delegate) {
    this.id = ++id;
    this.file = file;
    this.url = url;
    this.delegate = delegate;
  }
  create(callback) {
    FileChecksum.create(this.file, ((error, checksum) =&gt; {
      if (error) {
        callback(error);
        return;
      }
      const blob = new BlobRecord(this.file, checksum, this.url);
      notify(this.delegate, &quot;directUploadWillCreateBlobWithXHR&quot;, blob.xhr);
      blob.create((error =&gt; {
        if (error) {
          callback(error);
        } else {
          const upload = new BlobUpload(blob);
          notify(this.delegate, &quot;directUploadWillStoreFileWithXHR&quot;, upload.xhr);
          upload.create((error =&gt; {
            if (error) {
              callback(error);
            } else {
              callback(null, blob.toJSON());
            }
          }));
        }
      }));
    }));
  }
}
function notify(object, methodName, ...messages) {
  if (object &amp;&amp; typeof object[methodName] == &quot;function&quot;) {
    return object[methodName](...messages);
  }
}
class DirectUploadController {
  constructor(input, file) {
    this.input = input;
    this.file = file;
    this.directUpload = new DirectUpload(this.file, this.url, this);
    this.dispatch(&quot;initialize&quot;);
  }
  start(callback) {
    const hiddenInput = document.createElement(&quot;input&quot;);
    hiddenInput.type = &quot;hidden&quot;;
    hiddenInput.name = this.input.name;
    this.input.insertAdjacentElement(&quot;beforebegin&quot;, hiddenInput);
    this.dispatch(&quot;start&quot;);
    this.directUpload.create(((error, attributes) =&gt; {
      if (error) {
        hiddenInput.parentNode.removeChild(hiddenInput);
        this.dispatchError(error);
      } else {
        hiddenInput.value = attributes.signed_id;
      }
      this.dispatch(&quot;end&quot;);
      callback(error);
    }));
  }
  uploadRequestDidProgress(event) {
    const progress = event.loaded / event.total * 100;
    if (progress) {
      this.dispatch(&quot;progress&quot;, {
        progress: progress
      });
    }
  }
  get url() {
    return this.input.getAttribute(&quot;data-direct-upload-url&quot;);
  }
  dispatch(name, detail = {}) {
    detail.file = this.file;
    detail.id = this.directUpload.id;
    return dispatchEvent(this.input, `direct-upload:${name}`, {
      detail: detail
    });
  }
  dispatchError(error) {
    const event = this.dispatch(&quot;error&quot;, {
      error: error
    });
    if (!event.defaultPrevented) {
      alert(error);
    }
  }
  directUploadWillCreateBlobWithXHR(xhr) {
    this.dispatch(&quot;before-blob-request&quot;, {
      xhr: xhr
    });
  }
  directUploadWillStoreFileWithXHR(xhr) {
    this.dispatch(&quot;before-storage-request&quot;, {
      xhr: xhr
    });
    xhr.upload.addEventListener(&quot;progress&quot;, (event =&gt; this.uploadRequestDidProgress(event)));
  }
}
const inputSelector = &quot;input[type=file][data-direct-upload-url]:not([disabled])&quot;;
class DirectUploadsController {
  constructor(form) {
    this.form = form;
    this.inputs = findElements(form, inputSelector).filter((input =&gt; input.files.length));
  }
  start(callback) {
    const controllers = this.createDirectUploadControllers();
    const startNextController = () =&gt; {
      const controller = controllers.shift();
      if (controller) {
        controller.start((error =&gt; {
          if (error) {
            callback(error);
            this.dispatch(&quot;end&quot;);
          } else {
            startNextController();
          }
        }));
      } else {
        callback();
        this.dispatch(&quot;end&quot;);
      }
    };
    this.dispatch(&quot;start&quot;);
    startNextController();
  }
  createDirectUploadControllers() {
    const controllers = [];
    this.inputs.forEach((input =&gt; {
      toArray(input.files).forEach((file =&gt; {
        const controller = new DirectUploadController(input, file);
        controllers.push(controller);
      }));
    }));
    return controllers;
  }
  dispatch(name, detail = {}) {
    return dispatchEvent(this.form, `direct-uploads:${name}`, {
      detail: detail
    });
  }
}
const processingAttribute = &quot;data-direct-uploads-processing&quot;;
const submitButtonsByForm = new WeakMap;
let started = false;
function start() {
  if (!started) {
    started = true;
    document.addEventListener(&quot;click&quot;, didClick, true);
    document.addEventListener(&quot;submit&quot;, didSubmitForm, true);
    document.addEventListener(&quot;ajax:before&quot;, didSubmitRemoteElement);
  }
}
function didClick(event) {
  const {target: target} = event;
  if ((target.tagName == &quot;INPUT&quot; || target.tagName == &quot;BUTTON&quot;) &amp;&amp; target.type == &quot;submit&quot; &amp;&amp; target.form) {
    submitButtonsByForm.set(target.form, target);
  }
}
function didSubmitForm(event) {
  handleFormSubmissionEvent(event);
}
function didSubmitRemoteElement(event) {
  if (event.target.tagName == &quot;FORM&quot;) {
    handleFormSubmissionEvent(event);
  }
}
function handleFormSubmissionEvent(event) {
  const form = event.target;
  if (form.hasAttribute(processingAttribute)) {
    event.preventDefault();
    return;
  }
  const controller = new DirectUploadsController(form);
  const {inputs: inputs} = controller;
  if (inputs.length) {
    event.preventDefault();
    form.setAttribute(processingAttribute, &quot;&quot;);
    inputs.forEach(disable);
    controller.start((error =&gt; {
      form.removeAttribute(processingAttribute);
      if (error) {
        inputs.forEach(enable);
      } else {
        submitForm(form);
      }
    }));
  }
}
function submitForm(form) {
  let button = submitButtonsByForm.get(form) || findElement(form, &quot;input[type=submit], button[type=submit]&quot;);
  if (button) {
    const {disabled: disabled} = button;
    button.disabled = false;
    button.focus();
    button.click();
    button.disabled = disabled;
  } else {
    button = document.createElement(&quot;input&quot;);
    button.type = &quot;submit&quot;;
    button.style.display = &quot;none&quot;;
    form.appendChild(button);
    button.click();
    form.removeChild(button);
  }
  submitButtonsByForm.delete(form);
}
function disable(input) {
  input.disabled = true;
}
function enable(input) {
  input.disabled = false;
}
function autostart() {
  if (window.ActiveStorage) {
    start();
  }
}
setTimeout(autostart, 1);
exports.DirectUpload = DirectUpload;
exports.start = start;
Object.defineProperty(exports, &quot;__esModule&quot;, {
  value: true
});</pre>

<p>})); }(activestorage, activestorage.exports));</p>

<p>class AttachmentUpload {</p>

<pre>constructor(attachment, element) {
  this.attachment = attachment;
  this.element = element;
  this.directUpload = new activestorage.exports.DirectUpload(attachment.file, this.directUploadUrl, this);
}

start() {
  this.directUpload.create(this.directUploadDidComplete.bind(this));
}

directUploadWillStoreFileWithXHR(xhr) {
  xhr.upload.addEventListener(&quot;progress&quot;, event =&gt; {
    const progress = event.loaded / event.total * 100;
    this.attachment.setUploadProgress(progress);
  });
}

directUploadDidComplete(error, attributes) {
  if (error) {
    throw new Error(`Direct upload failed: ${error}`)
  }

  this.attachment.setAttributes({
    sgid: attributes.attachable_sgid,
    url: this.createBlobUrl(attributes.signed_id, attributes.filename)
  });
}

createBlobUrl(signedId, filename) {
  return this.blobUrlTemplate
    .replace(&quot;:signed_id&quot;, signedId)
    .replace(&quot;:filename&quot;, encodeURIComponent(filename))
}

get directUploadUrl() {
  return this.element.dataset.directUploadUrl
}

get blobUrlTemplate() {
  return this.element.dataset.blobUrlTemplate
}</pre>

<p>}</p>

<p>addEventListener(“trix-attachment-add”, event =&gt; {</p>

<pre>const { attachment, target } = event;

if (attachment.file) {
  const upload = new AttachmentUpload(attachment, target);
  upload.start();
}</pre>

<p>});</p>

</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="https://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://ruby.github.io/rdoc/">RDoc</a> 6.4.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

